# GCC C compiler for VAX-11

VAX-11用のGCC C compilerのDev Containerです。

ただし`libc`などの標準ライブラリがないため、`-nostdlib`オプションが必須です。

## Demos

サンプルプログラムが`demo`ディレクトリーにあります。

```bash
cd demo/hello
make
vax780 demo.ini

# expected output
VAX780 simulator V3.8-1
Logging to file "demo.log"
Hello
Hello from VAX-11 bare-metal!
HALT instruction, PC: 00001026 (BRB 1025)
sim> [Ctrl-C]
```

```bash
cd demo/mandelbrot
make
vax780 demo.ini

# expected output
VAX780 simulator V3.8-1
000000011111111111111111122222233347D7C8322222111100000000000000000000000000000
000001111111111111111122222222333557BF75433222211111000000000000000000000000000
000111111111111111112222222233445C      643332222111110000000000000000000000000
001111111111111111222222233444556B      654433332211111100000000000000000000000
11111111111111112222233345 D978 BDF    D 9 6556E4221111110000000000000000000000
111111111111122223333334469                 F   6322111111000000000000000000000
1111111111222333333334457CA                    85332111111100000000000000000000
111111222349A44444455556A                      96532211111110000000000000000000
122222233346CCC7AC776679                         A32211111110000000000000000000
2222233334567        AA                         9532221111111000000000000000000
222333346679                                    9432221111111000000000000000000
234445567                                      B5432221111111000000000000000000
                                              864332221111111000000000000000000
234445567                                      B5432221111111000000000000000000
222333346679                                    9432221111111000000000000000000
2222233334567F       AA                         9532221111111000000000000000000
122222233346CCC7AC776679                         A32211111110000000000000000000
111111222349B44444455556A                      96532211111110000000000000000000
1111111111222333333334457CA                    85332111111100000000000000000000
111111111111122223333334469                     6322111111000000000000000000000
11111111111111112222233345 D978 BD     D 9 6556E4221111110000000000000000000000
001111111111111111222222233444556B      654433332211111100000000000000000000000
000111111111111111112222222233445C      643332222111110000000000000000000000000
000001111111111111111122222222333557BF75433222211111000000000000000000000000000
000000011111111111111111122222233347D7D8322222111100000000000000000000000000000
HALT instruction, PC: 00001026 (HALT)
sim> [Ctrl-C]
```


### compile example

```bash
vax-unknown-netbsdelf-gcc -nostdlib -Ttext=0x1000 test/test.c
vax-unknown-netbsdelf-objdump -d a.out  > test/test.s
```

## Git

editor が設定されていないため、コマンドラインから`git commit --amend`など編集が必要な操作ができません。そこで、`.git/config`に`editor`の設定を加えます。

```
[core]
 editor = code --wait
```

ローカルの`~/.gitconfig`に設定がある場合は、デフォルト設定ではこのファイルがコピーされるのでコンテナ毎の設定は不要です。
